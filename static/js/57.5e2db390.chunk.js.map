{"version":3,"file":"static/js/57.5e2db390.chunk.js","mappings":"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","sources":["pages/MaterialPage/MaterialPage.styled.js","pages/MaterialPage/MaterialPage.jsx"],"sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport const MainTableWrapper = styled.div`\r\n  max-height: 85vh;\r\n`;\r\nexport const SearchWrapper = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport MaterialTable from \"../../components/MaterialTable/MaterialTable\";\r\nimport Section from \"../../components/Section/Section\";\r\nimport Search from \"../../components/Search/Search\";\r\nimport SearchResults from \"../../components/SearchResults/SearchResults\";\r\nimport UnitSelect from \"../../components/UnitSelect/UnitSelect\";\r\nimport { createOptionsFromUnits } from \"../../services\";\r\nimport { checkIsString, parseNumber } from \"../../services\";\r\nimport { MainTableWrapper, SearchWrapper } from \"./MaterialPage.styled\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  searchMaterialByDescription,\r\n  searchMaterialByCode,\r\n  getMaterialById,\r\n} from \"../../services/api\";\r\nimport MaterialList from \"../../components/MaterialList/MaterialList\";\r\n\r\nconst MaterialPage = () => {\r\n  const [searchResult, setSearchResult] = useState([]);\r\n  const [filteredResults, setFilteredResults] = useState([]);\r\n  const [unit, setUnit] = useState(null);\r\n  const [options, setOptions] = useState(null);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [material, setMaterial] = useState([]);\r\n  const [status, setStatus] = useState(\"materials\");\r\n\r\n  useEffect(() => {\r\n    const getVisibleMaterials = () => {\r\n      if (unit) {\r\n        return searchResult.filter((item) => item.Unit === unit);\r\n      }\r\n      return searchResult;\r\n    };\r\n    setFilteredResults(getVisibleMaterials);\r\n  }, [options, searchResult, unit]);\r\n\r\n  // Викликається під час відправлення форми\r\n  const backToTable = () => {\r\n    setSearchResult([]);\r\n    setFilteredResults([]);\r\n    setUnit(null);\r\n    setStatus(\"materials\");\r\n  };\r\n\r\n  // вибір одиниці виміру\r\n  const selectUnit = (option) => {\r\n    setUnit(option.value);\r\n  };\r\n\r\n  // Пошук елементів\r\n  const submit = (searchValue) => {\r\n    setStatus(\"search\");\r\n    const isString = checkIsString(searchValue);\r\n    const codeNumber = parseNumber(searchValue);\r\n\r\n    if (isString) {\r\n      setQuery(searchValue);\r\n\r\n      // console.log(`search ${searchValue} by description`);\r\n      async function search(searchValue) {\r\n        setIsLoading(true);\r\n        setSearchResult([]);\r\n        try {\r\n          const response = await searchMaterialByDescription(searchValue);\r\n          if (response) {\r\n            // console.log(response.data);\r\n            setSearchResult(response.data);\r\n\r\n            // зробити опції для фільтру по unit\r\n            setOptions(createOptionsFromUnits(response.data));\r\n          }\r\n        } catch {\r\n          toast.error(`Не вдалось знайти ${searchValue}`, { autoClose: 3000 });\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n      search(searchValue);\r\n    } else {\r\n      async function search(codeNumber) {\r\n        // console.log(`search ${codeNumber} by code`);\r\n        setIsLoading(true);\r\n        setSearchResult([]);\r\n        try {\r\n          const response = await searchMaterialByCode(codeNumber);\r\n          // console.log(response.data);\r\n          if (response) {\r\n            setSearchResult(response.data);\r\n            setOptions(createOptionsFromUnits(response.data));\r\n          }\r\n        } catch {\r\n          toast.error(`Не вдалось знайти ${searchValue}`, { autoClose: 3000 });\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n      search(codeNumber);\r\n    }\r\n  };\r\n\r\n  // Отримати по id\r\n  const materialById = (id) => {\r\n    setStatus(\"material\");\r\n    const controller = new AbortController();\r\n    async function getMaterial(id) {\r\n      try {\r\n        //  setIsLoading(true);\r\n        const response = await getMaterialById(id, controller.signal);\r\n\r\n        setMaterial([response.data]);\r\n      } catch {\r\n        toast.error(\"Не вдалось отримати матеріал\");\r\n      } finally {\r\n        //  setIsLoading(false);\r\n      }\r\n    }\r\n    getMaterial(id);\r\n    return () => {\r\n      controller.abort();\r\n    };\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Section>\r\n        <SearchWrapper>\r\n          <Search\r\n            submit={submit}\r\n            isLoading={isLoading}\r\n            back={backToTable}\r\n            isSubmiting={isLoading}\r\n          />\r\n          <div style={{ minWidth: \"20%\" }}>\r\n            {searchResult?.length > 0 && (\r\n              <UnitSelect onSelect={selectUnit} options={options} />\r\n            )}\r\n          </div>\r\n        </SearchWrapper>\r\n      </Section>\r\n      <Section>\r\n        <MainTableWrapper>\r\n          {status === \"materials\" && <MaterialTable byId={materialById} />}\r\n\r\n          {status === \"material\" && (\r\n            <MaterialList items={material} byId={materialById} />\r\n          )}\r\n\r\n          {status === \"search\" && (\r\n            <SearchResults\r\n              results={filteredResults}\r\n              query={query}\r\n              variant=\"material\"\r\n              byId={materialById}\r\n            />\r\n          )}\r\n        </MainTableWrapper>\r\n      </Section>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MaterialPage;\r\n"],"names":["MainTableWrapper","styled","div","_templateObject","_taggedTemplateLiteral","SearchWrapper","_templateObject2","_useState","useState","_useState2","_slicedToArray","searchResult","setSearchResult","_useState3","_useState4","filteredResults","setFilteredResults","_useState5","_useState6","unit","setUnit","_useState7","_useState8","options","setOptions","_useState9","_useState10","query","setQuery","_useState11","_useState12","isLoading","setIsLoading","_useState13","_useState14","material","setMaterial","_useState15","_useState16","status","setStatus","useEffect","filter","item","Unit","materialById","id","controller","AbortController","_getMaterial","_asyncToGenerator","_regeneratorRuntime","mark","_callee3","response","wrap","_context3","prev","next","getMaterialById","signal","sent","data","t0","toast","error","finish","stop","apply","arguments","_x3","getMaterial","abort","_jsxs","_Fragment","children","_jsx","Section","Search","submit","searchValue","isString","checkIsString","codeNumber","parseNumber","search","_ref","_callee","_context","searchMaterialByDescription","createOptionsFromUnits","concat","autoClose","_x","_ref2","_callee2","_context2","searchMaterialByCode","_x2","back","isSubmiting","style","minWidth","length","UnitSelect","onSelect","option","value","MaterialTable","byId","MaterialList","items","SearchResults","results","variant"],"sourceRoot":""}