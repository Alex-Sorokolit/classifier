{"version":3,"file":"static/js/825.1fd285a6.chunk.js","mappings":"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","sources":["components/Users/Users.styled.js","components/Users/Users.jsx","components/SideBar/SideBar.styled.js","components/SideBar/SideBar.jsx","pages/AdminPage/AdminPage.jsx"],"sourcesContent":["import styled from \"styled-components\";\r\nimport { setRoleColor } from \"../../services\";\r\n\r\nexport const Table = styled.table`\r\n  border-collapse: collapse;\r\n\r\n  & caption {\r\n    text-align: left;\r\n  }\r\n\r\n  & th,\r\n  & td {\r\n    padding: 2px 10px;\r\n    border: 1px solid #2a2a2a;\r\n  }\r\n\r\n  & tr:hover {\r\n    background-color: ${(props) => props.theme.colors.backgroundGrey};\r\n  }\r\n`;\r\n\r\nexport const Row = styled.tr``;\r\n\r\nexport const Name = styled.td`\r\n  /* color: ${(props) => props.theme.colors.white}; */\r\n  /* background-color: ${setRoleColor}; */\r\n`;\r\nexport const Role = styled.td`\r\n  /* color: ${(props) => props.theme.colors.white}; */\r\n  background-color: ${setRoleColor};\r\n`;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { getAllUsers, updateRole } from \"../../services\";\r\nimport { toast } from \"react-toastify\";\r\nimport { Table, Row, Name, Role } from \"./Users.styled\";\r\nimport Select from \"react-select\";\r\n\r\nconst options = [\r\n  { value: \"user\", label: \"user\" },\r\n  { value: \"designer\", label: \"designer\" },\r\n  { value: \"creator\", label: \"creator\" },\r\n  { value: \"service\", label: \"service\" },\r\n  { value: \"rental\", label: \"rental\" },\r\n];\r\n\r\nconst Users = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [selectedRole, setSelectedRole] = useState(null);\r\n  const [sortDirection, setSortDirection] = useState(\"asc\");\r\n\r\n  // запит по всіх користувачів\r\n  useEffect(() => {\r\n    const controller = new AbortController();\r\n\r\n    async function allUsers() {\r\n      try {\r\n        const response = await getAllUsers(controller.signal);\r\n        // console.log(\"response: \", response.data);\r\n        setUsers(response.data);\r\n      } catch (error) {\r\n        toast.error(\"Не вдалось завантажити користувачів\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n    allUsers();\r\n  }, []);\r\n\r\n  // функція зміни ролі\r\n  async function handleChange(selectedRole, id) {\r\n    setSelectedRole(selectedRole);\r\n    // Запит на зміну ролі\r\n    const controller = new AbortController();\r\n    async function updateUserRole(id) {\r\n      try {\r\n        // Виконуємо запит на зміну ролі\r\n        const response = await updateRole(\r\n          id,\r\n          selectedRole.value,\r\n          controller.signal\r\n        );\r\n\r\n        // Якщо запит успішний, оновлюємо стан користувачів\r\n        if (response.status === 200) {\r\n          // Знаходимо індекс користувача, якому ми змінюємо роль\r\n          const userIndex = users.findIndex((user) => user._id === id);\r\n\r\n          // Перевіряємо, чи знайдено користувача з вказаним ідентифікатором\r\n          if (userIndex !== -1) {\r\n            // Клонуємо масив користувачів\r\n            const updatedUsers = [...users];\r\n\r\n            // Оновлюємо роль користувача з вказаним ідентифікатором\r\n            updatedUsers[userIndex] = {\r\n              ...updatedUsers[userIndex],\r\n              role: selectedRole.value,\r\n            };\r\n\r\n            // Встановлюємо оновлений масив користувачів у стані компонента\r\n            setUsers(updatedUsers);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        // Виводимо повідомлення про помилку, якщо сталася помилка під час виконання запиту\r\n        toast.error(\"Не вдалось оновити роль\");\r\n      }\r\n    }\r\n\r\n    // Викликаємо функцію для оновлення ролі користувача\r\n    updateUserRole(id);\r\n  }\r\n\r\n  // Сортування таблиці\r\n  const sortData = (param) => {\r\n    const sortedData =\r\n      sortDirection === \"asc\"\r\n        ? [...users].sort((a, b) =>\r\n            a[param] < b[param] ? -1 : a[param] > b[param] ? 1 : 0\r\n          )\r\n        : [...users].sort((a, b) =>\r\n            b[param] < a[param] ? -1 : b[param] > a[param] ? 1 : 0\r\n          );\r\n\r\n    setUsers(sortedData);\r\n    setSortDirection(sortDirection === \"asc\" ? \"desc\" : \"asc\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {!isLoading && (\r\n        <div>\r\n          <Table>\r\n            <caption>Список зареєстрованих користувачів</caption>\r\n            <thead>\r\n              <tr>\r\n                <th onClick={() => sortData(\"name\")}>Ім'я</th>\r\n                <th onClick={() => sortData(\"lastName\")}>Прізвище</th>\r\n                <th onClick={() => sortData(\"email\")}>Email</th>\r\n                <th onClick={() => sortData(\"phone\")}>Телефон</th>\r\n                <th onClick={() => sortData(\"company\")}>Компанія</th>\r\n                <th onClick={() => sortData(\"jobRole\")}>Посада</th>\r\n                <th onClick={() => sortData(\"role\")}>Змінити роль</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {users.map((user) => {\r\n                return (\r\n                  <Row key={user._id}>\r\n                    <Name role={user.role}>{user.name}</Name>\r\n                    <Name role={user.role}>{user.lastName}</Name>\r\n                    <td>{user.email}</td>\r\n                    <td>{user.phone}</td>\r\n                    <td>{user.company}</td>\r\n                    <td>{user.jobRole}</td>\r\n                    <Role role={user.role}>\r\n                      <Select\r\n                        isDisabled={user.role === \"admin\"}\r\n                        placeholder={user.role}\r\n                        defaultValue={selectedRole}\r\n                        onChange={(option) => handleChange(option, user._id)}\r\n                        options={options}\r\n                      />\r\n                    </Role>\r\n                  </Row>\r\n                );\r\n              })}\r\n            </tbody>\r\n          </Table>\r\n\r\n          <p>Кількість користувачів: {users.length}</p>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n","import styled from \"styled-components\";\r\n\r\nexport const Navigation = styled.nav`\r\n  height: 100%;\r\n  border: 1px solid tomato;\r\n  display: flex;\r\n  flex-direction: column;\r\n  box-shadow: ${(props) => props.theme.shadows.shadow};\r\n  padding: 5px;\r\n  justify-content: start;\r\n  align-items: center;\r\n  width: 200px;\r\n`;\r\n","import React from \"react\";\r\nimport { Navigation } from \"./SideBar.styled\";\r\n\r\nconst SideBar = ({ children }) => {\r\n  return (\r\n    <>\r\n      <Navigation>\r\n        <ul>{children}</ul>\r\n      </Navigation>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SideBar;\r\n","import React from \"react\";\r\nimport Users from \"../../components/Users/Users\";\r\nimport SideBar from \"../../components/SideBar/SideBar\";\r\nimport Section from \"../../components/Section/Section\";\r\nconst AdminPage = () => {\r\n  return (\r\n    <Section>\r\n      <SideBar></SideBar>\r\n      <div>\r\n        <Users />\r\n      </div>\r\n    </Section>\r\n  );\r\n};\r\n\r\nexport default AdminPage;\r\n"],"names":["Table","styled","table","_templateObject","_taggedTemplateLiteral","props","theme","colors","backgroundGrey","Row","tr","_templateObject2","Name","td","_templateObject3","white","setRoleColor","Role","_templateObject4","options","value","label","_useState","useState","_useState2","_slicedToArray","users","setUsers","_useState3","_useState4","isLoading","setIsLoading","_useState5","_useState6","selectedRole","setSelectedRole","_useState7","_useState8","sortDirection","setSortDirection","_handleChange","_asyncToGenerator","_regeneratorRuntime","mark","_callee3","id","controller","updateUserRole","_updateUserRole","wrap","_context3","prev","next","_callee2","userIndex","updatedUsers","_context2","updateRole","signal","sent","status","findIndex","user","_id","_toConsumableArray","_objectSpread","role","t0","toast","error","stop","apply","arguments","_x3","AbortController","useEffect","_allUsers","_callee","response","_context","getAllUsers","data","finish","allUsers","sortData","param","sortedData","sort","a","b","_jsx","_Fragment","children","_jsxs","onClick","map","name","lastName","email","phone","company","jobRole","Select","isDisabled","placeholder","defaultValue","onChange","option","_x","_x2","handleChange","length","Navigation","nav","shadows","shadow","_ref","Section","SideBar","Users"],"sourceRoot":""}