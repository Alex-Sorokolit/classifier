{"version":3,"file":"static/js/57.909fcffc.chunk.js","mappings":"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","sources":["pages/MaterialPage/MaterialPage.styled.js","pages/MaterialPage/MaterialPage.jsx"],"sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport const MainTableWrapper = styled.div`\r\n  max-height: 85vh;\r\n`;\r\nexport const SearchWrapper = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport MaterialTable from \"../../components/MaterialTable/MaterialTable\";\r\nimport Section from \"../../components/Section/Section\";\r\nimport Search from \"../../components/Search/Search\";\r\nimport SearchResults from \"../../components/SearchResults/SearchResults\";\r\nimport UnitSelect from \"../../components/UnitSelect/UnitSelect\";\r\nimport { createOptionsFromUnits } from \"../../services\";\r\nimport { checkIsString, parseNumber } from \"../../services\";\r\nimport { MainTableWrapper, SearchWrapper } from \"./MaterialPage.styled\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  searchMaterialByDescription,\r\n  searchMaterialByCode,\r\n} from \"../../services/api\";\r\n\r\nconst MaterialPage = () => {\r\n  const [searchResult, setSearchResult] = useState([]);\r\n  const [filteredResults, setFilteredResults] = useState([]);\r\n  const [unit, setUnit] = useState(null);\r\n  const [options, setOptions] = useState(null);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const getVisibleMaterials = () => {\r\n      if (unit) {\r\n        return searchResult.filter((item) => item.Unit === unit);\r\n      }\r\n      return searchResult;\r\n    };\r\n    setFilteredResults(getVisibleMaterials);\r\n  }, [options, searchResult, unit]);\r\n\r\n  // Викликається під час відправлення форми\r\n  const backToTable = () => {\r\n    setSearchResult([]);\r\n    setFilteredResults([]);\r\n    setUnit(null);\r\n  };\r\n\r\n  // вибір одиниці виміру\r\n  const selectUnit = (option) => {\r\n    setUnit(option.value);\r\n  };\r\n\r\n  // Пошук елементів\r\n  const submit = (searchValue) => {\r\n    // console.log(\"searchValue: \", searchValue);\r\n\r\n    const isString = checkIsString(searchValue);\r\n    const codeNumber = parseNumber(searchValue);\r\n\r\n    if (isString) {\r\n      setQuery(searchValue);\r\n\r\n      // console.log(`search ${searchValue} by description`);\r\n      async function search(searchValue) {\r\n        setIsLoading(true);\r\n        setSearchResult([]);\r\n        try {\r\n          const response = await searchMaterialByDescription(searchValue);\r\n          if (response) {\r\n            // console.log(response.data);\r\n            setSearchResult(response.data);\r\n\r\n            // зробити опції для фільтру по unit\r\n            setOptions(createOptionsFromUnits(response.data));\r\n          }\r\n        } catch {\r\n          toast.error(`Не вдалось знайти ${searchValue}`, { autoClose: 3000 });\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n      search(searchValue);\r\n    } else {\r\n      async function search(codeNumber) {\r\n        // console.log(`search ${codeNumber} by code`);\r\n        setIsLoading(true);\r\n        setSearchResult([]);\r\n        try {\r\n          const response = await searchMaterialByCode(codeNumber);\r\n          // console.log(response.data);\r\n          if (response) {\r\n            setSearchResult(response.data);\r\n            setOptions(createOptionsFromUnits(response.data));\r\n          }\r\n        } catch {\r\n          toast.error(`Не вдалось знайти ${searchValue}`, { autoClose: 3000 });\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n      search(codeNumber);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Section>\r\n        <SearchWrapper>\r\n          <Search\r\n            submit={submit}\r\n            isLoading={isLoading}\r\n            back={backToTable}\r\n            isSubmiting={isLoading}\r\n          />\r\n          <div style={{ minWidth: \"20%\" }}>\r\n            {searchResult.length > 0 && (\r\n              <UnitSelect onSelect={selectUnit} options={options} />\r\n            )}\r\n          </div>\r\n        </SearchWrapper>\r\n      </Section>\r\n      <Section>\r\n        <MainTableWrapper>\r\n          {searchResult.length > 0 ? (\r\n            <SearchResults\r\n              results={filteredResults}\r\n              query={query}\r\n              variant=\"material\"\r\n            />\r\n          ) : (\r\n            <MaterialTable />\r\n          )}\r\n        </MainTableWrapper>\r\n      </Section>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MaterialPage;\r\n"],"names":["MainTableWrapper","styled","div","_templateObject","_taggedTemplateLiteral","SearchWrapper","_templateObject2","_useState","useState","_useState2","_slicedToArray","searchResult","setSearchResult","_useState3","_useState4","filteredResults","setFilteredResults","_useState5","_useState6","unit","setUnit","_useState7","_useState8","options","setOptions","_useState9","_useState10","query","setQuery","_useState11","_useState12","isLoading","setIsLoading","useEffect","filter","item","Unit","_jsxs","_Fragment","children","_jsx","Section","Search","submit","searchValue","isString","checkIsString","codeNumber","parseNumber","search","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","searchMaterialByDescription","sent","data","createOptionsFromUnits","t0","toast","error","concat","autoClose","finish","stop","_x","apply","arguments","_ref2","_callee2","_context2","searchMaterialByCode","_x2","back","isSubmiting","style","minWidth","length","UnitSelect","onSelect","option","value","SearchResults","results","variant","MaterialTable"],"sourceRoot":""}