{"version":3,"file":"static/js/592.5571cfc7.chunk.js","mappings":"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","sources":["components/MaterialTable/MaterialTable.styled.js","components/MaterialTable/MaterialTable.jsx","pages/MaterialPage/MaterialPage.styled.js","pages/MaterialPage/MaterialPage.jsx"],"sourcesContent":["import styled from \"styled-components\";\r\n\r\nexport const ListWrapper = styled.div`\r\n  /* outline: 2px solid red; */\r\n  margin-left: -${(props) => props.theme.space[3]}px;\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport MaterialList from \"../MaterialList/MaterialList\";\r\nimport { getByLevel } from \"../../services/api\";\r\nimport { toast } from \"react-toastify\";\r\nimport { BarLoader } from \"react-spinners\";\r\nimport { ListWrapper } from \"./MaterialTable.styled\";\r\nimport ScrollToTopBtn from \"../ScrollToTopBtn/ScrollToTopBtn\";\r\n\r\nconst MaterialTable = ({ byId }) => {\r\n  const [mainCategory, setMainCategory] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  // Запит по всі головні категорії при монтуванні компонента\r\n  useEffect(() => {\r\n    const controller = new AbortController();\r\n    async function getCategory() {\r\n      try {\r\n        setIsLoading(true);\r\n        const response = await getByLevel(2, controller.signal);\r\n        setMainCategory(response.data);\r\n      } catch {\r\n        toast.error(\"Щось пішло не так, спробуйте перезавантажити сторінку\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    }\r\n    getCategory();\r\n    return () => {\r\n      setMainCategory([]);\r\n      controller.abort();\r\n    };\r\n  }, [setMainCategory]);\r\n\r\n  return (\r\n    <>\r\n      {isLoading ? (\r\n        <BarLoader color=\"#125b56\" width=\"100%\" />\r\n      ) : (\r\n        <ListWrapper>\r\n          <MaterialList\r\n            items={mainCategory}\r\n            style={{ padding: 0 }}\r\n            byId={byId}\r\n          />\r\n          <ScrollToTopBtn />\r\n        </ListWrapper>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MaterialTable;\r\n","import styled from \"styled-components\";\r\n\r\nexport const MainTableWrapper = styled.div`\r\n  max-height: 85vh;\r\n`;\r\nexport const SearchWrapper = styled.div`\r\n  display: flex;\r\n  gap: 10px;\r\n  align-items: center;\r\n`;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport MaterialTable from \"../../components/MaterialTable/MaterialTable\";\r\nimport Section from \"../../components/Section/Section\";\r\nimport Search from \"../../components/Search/Search\";\r\nimport SearchResults from \"../../components/SearchResults/SearchResults\";\r\nimport UnitSelect from \"../../components/UnitSelect/UnitSelect\";\r\nimport { createOptionsFromUnits } from \"../../services\";\r\nimport { checkIsString, parseNumber } from \"../../services\";\r\nimport { MainTableWrapper, SearchWrapper } from \"./MaterialPage.styled\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  searchMaterialByDescription,\r\n  searchMaterialByCode,\r\n  getMaterialById,\r\n} from \"../../services/api\";\r\nimport MaterialList from \"../../components/MaterialList/MaterialList\";\r\n\r\nconst MaterialPage = () => {\r\n  const [searchResult, setSearchResult] = useState([]);\r\n  const [filteredResults, setFilteredResults] = useState([]);\r\n  const [unit, setUnit] = useState(null);\r\n  const [options, setOptions] = useState(null);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [material, setMaterial] = useState([]);\r\n  const [status, setStatus] = useState(\"materials\"); // визначає що буде показано, матеріали чи результат пошуку по дереву\r\n\r\n  useEffect(() => {\r\n    const getVisibleMaterials = () => {\r\n      if (unit) {\r\n        return searchResult.filter((item) => item.Unit === unit);\r\n      }\r\n      return searchResult;\r\n    };\r\n    setFilteredResults(getVisibleMaterials);\r\n  }, [options, searchResult, unit]);\r\n\r\n  // Викликається під час відправлення форми\r\n  const backToTable = () => {\r\n    setSearchResult([]);\r\n    setFilteredResults([]);\r\n    setUnit(null);\r\n    setStatus(\"materials\");\r\n  };\r\n\r\n  // вибір одиниці виміру\r\n  const selectUnit = (option) => {\r\n    setUnit(option.value);\r\n  };\r\n\r\n  // Пошук елементів\r\n  const submit = (searchValue) => {\r\n    setStatus(\"search\");\r\n    const isString = checkIsString(searchValue);\r\n    const codeNumber = parseNumber(searchValue);\r\n\r\n    if (isString) {\r\n      setQuery(searchValue);\r\n\r\n      // console.log(`search ${searchValue} by description`);\r\n      async function search(searchValue) {\r\n        setIsLoading(true);\r\n        setSearchResult([]);\r\n        try {\r\n          const response = await searchMaterialByDescription(searchValue);\r\n          if (response) {\r\n            setSearchResult(response.data);\r\n\r\n            // зробити опції для фільтру по unit\r\n            setOptions(createOptionsFromUnits(response.data));\r\n          }\r\n        } catch {\r\n          toast.error(`Не вдалось знайти ${searchValue}`, { autoClose: 3000 });\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n      search(searchValue);\r\n    } else {\r\n      async function search(codeNumber) {\r\n        // console.log(`search ${codeNumber} by code`);\r\n        setIsLoading(true);\r\n        setSearchResult([]);\r\n        try {\r\n          const response = await searchMaterialByCode(codeNumber);\r\n          // console.log(response.data);\r\n          if (response) {\r\n            setSearchResult(response.data);\r\n            setOptions(createOptionsFromUnits(response.data));\r\n          }\r\n        } catch {\r\n          toast.error(`Не вдалось знайти ${searchValue}`, { autoClose: 3000 });\r\n        } finally {\r\n          setIsLoading(false);\r\n        }\r\n      }\r\n      search(codeNumber);\r\n    }\r\n  };\r\n\r\n  // Отримати по id\r\n  const materialById = (id) => {\r\n    setStatus(\"oneMaterial\");\r\n    const controller = new AbortController();\r\n    async function getMaterial(id) {\r\n      try {\r\n        //  setIsLoading(true);\r\n        const response = await getMaterialById(id, controller.signal);\r\n\r\n        setMaterial([response.data]);\r\n      } catch {\r\n        toast.error(\"Не вдалось отримати матеріал\");\r\n      } finally {\r\n        //  setIsLoading(false);\r\n      }\r\n    }\r\n    getMaterial(id);\r\n    return () => {\r\n      controller.abort();\r\n    };\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Section>\r\n        <SearchWrapper>\r\n          <Search\r\n            submit={submit}\r\n            isLoading={isLoading}\r\n            back={backToTable}\r\n            isSubmiting={isLoading}\r\n          />\r\n          <div style={{ minWidth: \"20%\" }}>\r\n            {searchResult?.length > 0 && (\r\n              <UnitSelect onSelect={selectUnit} options={options} />\r\n            )}\r\n          </div>\r\n        </SearchWrapper>\r\n      </Section>\r\n\r\n      <Section>\r\n        <MainTableWrapper>\r\n          {status === \"materials\" && <MaterialTable byId={materialById} />}\r\n\r\n          {status === \"oneMaterial\" && (\r\n            <MaterialList items={material} byId={materialById} />\r\n          )}\r\n\r\n          {status === \"search\" && (\r\n            <SearchResults\r\n              results={filteredResults}\r\n              query={query}\r\n              variant=\"material\"\r\n              byId={materialById}\r\n            />\r\n          )}\r\n        </MainTableWrapper>\r\n      </Section>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MaterialPage;\r\n"],"names":["ListWrapper","styled","div","_templateObject","_taggedTemplateLiteral","props","theme","space","_ref","byId","_useState","useState","_useState2","_slicedToArray","mainCategory","setMainCategory","_useState3","_useState4","isLoading","setIsLoading","useEffect","controller","AbortController","_getCategory","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_context","prev","next","getByLevel","signal","sent","data","t0","toast","error","finish","stop","apply","arguments","getCategory","abort","_jsx","_Fragment","children","BarLoader","color","width","_jsxs","MaterialList","items","style","padding","ScrollToTopBtn","MainTableWrapper","SearchWrapper","_templateObject2","searchResult","setSearchResult","filteredResults","setFilteredResults","_useState5","_useState6","unit","setUnit","_useState7","_useState8","options","setOptions","_useState9","_useState10","query","setQuery","_useState11","_useState12","_useState13","_useState14","material","setMaterial","_useState15","_useState16","status","setStatus","filter","item","Unit","materialById","id","_getMaterial","_callee3","_context3","getMaterialById","_x3","getMaterial","Section","Search","submit","searchValue","isString","checkIsString","codeNumber","parseNumber","search","searchMaterialByDescription","createOptionsFromUnits","concat","autoClose","_x","_ref2","_callee2","_context2","searchMaterialByCode","_x2","back","isSubmiting","minWidth","length","UnitSelect","onSelect","option","value","MaterialTable","SearchResults","results","variant"],"sourceRoot":""}